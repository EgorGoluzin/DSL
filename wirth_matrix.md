# Матрицы для диаграммы Вирта

Матрица представлена блоками - квадратами в матрице по количеству терминалов, содержащихся в блоке.
Можно сказать, что входы блока - это полоса 1 * n над ним, а выходы - полоса n * 1 справа от него.
При этом эти полосы в матрице заполняются не в момент выхода из блока, а в момент...?

!Предложение!: выходы текущего блока заполняются следующим, входы текущего - предыдущим.
Иными словами, выходы определяют, в какие индексы текущий блок выходит. А так как об этом знает
только следующий блок, выходы заполняются им - следующим. Аналогично - со входами: предыдущий блок знает, какие из его индексов выходят в текущий блок.

!Предложение!: сейчас получается, что блоки как бы перекрестно ссылаются друг на друга. Возможно, можно 
без потерь записывать выходы предыдущего блока к себе, а входы в себя отдать предыдущему блоку, но это 
может усложнить этап записи в матрицу?

## Sequence

Последовательность блоков. Выходу каждого блока в последовательности ставится в соответствие вход следующего.
Далее блоки сами модифицируют соседние входы и выходы.

## Alternative

Разбивает данное ему пространство на блоки Sequence. Собирает у каждого Sequence данные о выходах в них
(имеется в виду выход из некоторого блока перед Alternative в конкретный блок Sequence; ВЫХОД, а не вход
в Sequence - по причинам, описанным ранее) и записывает эти выходы в предыдущий блок.
Также Alternative собирает выходы своих Sequence и записывает их во вход следующего блока.
(Возможно, надо сохранить выходы, а не писать их явно - для Iteration?...)

## Optional

Optional берет выходы предыдущего блока и записывает их во входы следующего блока. Если дальше стоит снова
Optional, он возьмет свои входы, то есть выходы предыдущего Optional, и запишет их во входы следующего блока.

## Iteration без решетки

Так как Iteration состоит из альтернативы, то Iteration возьмет выходы своей альтернативы и запишет их во
вход первого элемента каждого Sequence в альтернативе (так как войти можем в любой из них).

## Iteration с решеткой

Еще думаю.
